import { useState, useCallback, useMemo } from "react";
import Avatar from "../Avatar";
import { createComponentTemplate } from "../../../storybook/functions/create-component-story";
import { ArgsTable, Story, Canvas, Meta } from "@storybook/addon-docs";
import { Calendar, Remove, Add, Check } from "../../Icon/Icons";
import { BUTTON_GROUP, SPLIT_BUTTON } from "../../../storybook/components/related-components/component-description-map";
import "./avatar.stories.scss";
import { WhatsNew, Home, Person } from "../../Icon/Icons";
import { MultipleStoryElementsWrapper } from "../../../storybook/components";
import { home, guest, minus, person1, person2, person3, manIcon, womanIcon, owner } from "./assets";

<Meta 
  title="Components/Avatars/Avatar" 
  component={Avatar} 
/>

<!--- Component template -->

export const avatarTemplate = createComponentTemplate(Avatar);

<!--- Component documentation -->

# Avatar
- [Overview](#overview)
- [Props](#props)
- [Usage](#usage)
- [Variants](#variants)
- [Do’s and don’ts](#dos-and-donts)
- [Use cases and examples](#use-cases-and-examples)
- [Related components](#related-components)
- [Feedback](#feedback)

## Overview
Avatar is a graphical representation of a person through a profile picture, image, icon, or set of initials.

<Canvas>
  <Story name="Overview" args={{size: Avatar.sizes.Large, src: person1, type: Avatar.types.IMG }}>>
      {avatarTemplate.bind({})}
  </Story>
</Canvas> 

## Props
<ArgsTable of={Avatar} />

## Usage
<UsageGuidelines
  guidelines={[
    "Use an avatar to help a user in the platform efficiently identify another person or a team.",
    "When there is no personal photo to show, use initials.",
    "If an image fails to load, fall back to the default user avatar.",
    "An avatar may contain a status icon to indicate a user’s status (working from home, busy, etc.).",
    "Use a tooltip or dialog when hovering over the avatar to offer more information. For example: with a person’s name."
  ]}
/>

## Variants
### Size
Avatars appear in 3 sizes: Small, Medium, and Large.
<Canvas>
  <Story name="Size">
    <Avatar size={Avatar.sizes.SMALL} src={person1} type={Avatar.types.IMG} />
    <Avatar size={Avatar.sizes.MEDIUM} src={person1} type={Avatar.types.IMG} />
    <Avatar size={Avatar.sizes.LARGE} src={person1} type={Avatar.types.IMG} />
  </Story>
</Canvas>

### Disabled
Use when a user is inactive in the system.
<Canvas>
  <Story name="Disable">
    <Avatar size={Avatar.sizes.SMALL} src={person1} type={Avatar.types.IMG} isDisabled />
    <Avatar size={Avatar.sizes.MEDIUM} src={person1} type={Avatar.types.IMG} isDisabled />
    <Avatar size={Avatar.sizes.LARGE} src={person1} type={Avatar.types.IMG} isDisabled />
  </Story>
</Canvas>

### Avatar with text
Use when a user’s image is not available, use their initials.
<Canvas>
  <Story name="Avatar with text">
    <Avatar size={Avatar.sizes.SMALL} type={Avatar.types.TEXT} text="RM" backgroundColor={Avatar.colors.LIPSTICK} />
    <Avatar size={Avatar.sizes.MEDIUM} type={Avatar.types.TEXT} text="RM" backgroundColor={Avatar.colors.LIPSTICK} />
    <Avatar size={Avatar.sizes.LARGE} type={Avatar.types.TEXT} text="RM" backgroundColor={Avatar.colors.DONE_GREEN} />
  </Story>
</Canvas>

### Square avatar with icon or text
Use for non-person avatars, such as a workspace or team.
<Canvas>
  <Story name="Square avatar">
    <Avatar
      size={Avatar.sizes.SMALL}
      type={Avatar.types.TEXT}
      text="R"
      backgroundColor={Avatar.colors.BRIGHT_BLUE}
      isSquare
    />
    <Avatar
      size={Avatar.sizes.MEDIUM}
      type={Avatar.types.ICON}
      text="RM"
      icon={WhatsNew}
      backgroundColor={Avatar.colors.AQUAMARINE}
      isSquare
    />
    <Avatar
      size={Avatar.sizes.LARGE}
      type={Avatar.types.TEXT}
      text="RM"
      backgroundColor={Avatar.colors.WORKING_ORANGE}
      isSquare
    />
  </Story>
</Canvas>

## Do’s and Don’ts
<ComponentRules
  rules={[
    {
      positive: {
        component: 
          <MultipleStoryElementsWrapper className="monday-style-story-avatar_multiplue-reverse">
            <Avatar size={Avatar.sizes.LARGE} src={person1} type={Avatar.types.IMG} />
            <Avatar size={Avatar.sizes.LARGE} src={person2} type={Avatar.types.IMG} />
            <Avatar size={Avatar.sizes.LARGE} src={person3} type={Avatar.types.IMG} />
          </MultipleStoryElementsWrapper>,
        description:"Use consistent avatar sizes for common use cases to convey their purpose."
      },
      negative: {
        component:
          <MultipleStoryElementsWrapper className="monday-style-story-avatar_multiplue-reverse">
            <Avatar size={Avatar.sizes.SMALL} src={person1} type={Avatar.types.IMG} />
            <Avatar size={Avatar.sizes.MEDIUM} src={person2} type={Avatar.types.IMG} />
            <Avatar size={Avatar.sizes.LARGE} src={person3} type={Avatar.types.IMG} />
          </MultipleStoryElementsWrapper>,
        description:"Avoid using a mix of avatar sizes that display together and create design imbalance."
      }
    },
    {
      positive: {
        component:<Avatar src={manIcon} type={Avatar.types.IMG} />,
        description:"Use branded generic avatars when a user has not set their avatar image."
      },
      negative: {
        component:<Avatar src={womanIcon} type={Avatar.types.IMG} />,
        description:"Don’t make assumptions and use gendered placeholder avatars."
      }
    }
  ]}
/>

## Use cases and examples
### Multiplue avatars
When there is more than one avatar, use an -8 margin between avatars.
<Canvas>
  <Story name="Multiplue avatars" >
    <MultipleStoryElementsWrapper className="monday-style-story-avatar_multiplue">
      <Avatar size={Avatar.sizes.LARGE} type={Avatar.types.IMG} src={person1}  />
      <Avatar size={Avatar.sizes.LARGE} type={Avatar.types.IMG} src={person2} />
      <Avatar size={Avatar.sizes.LARGE} type={Avatar.types.IMG} src={person3} />
  </MultipleStoryElementsWrapper>
  </Story>
</Canvas>

### Avatar with right badge
Use to indicate the user’s permissions such as: Guest, owner.

<Canvas>
  <Story name="Avatar with right badge">
    <Avatar
        size={Avatar.sizes.LARGE} 
        type={Avatar.types.IMG} 
        src={person1} 
        bottomRightBadgeProps={{src: guest}}
    />
    <Avatar
        size={Avatar.sizes.LARGE} 
        type={Avatar.types.IMG} 
        src={person1} 
        bottomRightBadgeProps={{src: owner}}
    />
  </Story>
</Canvas> 

### Avatar with left badge
Use to indicate the status of a user such as: Working from home, out of office etc.
<Canvas>
  <Story name="Avatar with left badge">
    <Avatar 
        size={Avatar.sizes.LARGE} 
        type={Avatar.types.IMG} 
        src={person1} 
        bottomLeftBadgeProps={{src: home}} 
    />
    <Avatar
        size={Avatar.sizes.LARGE} 
        type={Avatar.types.IMG} 
        src={person1} 
        bottomLeftBadgeProps={{src: minus}}
    />
  </Story>
</Canvas> 

## Related components
<RelatedComponents componentsNames={[SPLIT_BUTTON, BUTTON_GROUP, BUTTON_GROUP]}/>
